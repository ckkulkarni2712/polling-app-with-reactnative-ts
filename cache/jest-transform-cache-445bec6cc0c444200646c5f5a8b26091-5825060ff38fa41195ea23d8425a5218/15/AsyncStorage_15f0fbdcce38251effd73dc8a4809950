c449a0ebff47dd36765802e3a487bfe7
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _NativeAsyncLocalStorage = _interopRequireDefault(require("./NativeAsyncLocalStorage"));
var _NativeAsyncSQLiteDBStorage = _interopRequireDefault(require("./NativeAsyncSQLiteDBStorage"));
var _invariant = _interopRequireDefault(require("invariant"));
var RCTAsyncStorage = _NativeAsyncSQLiteDBStorage["default"] || _NativeAsyncLocalStorage["default"];
var AsyncStorage = {
  _getRequests: [],
  _getKeys: [],
  _immediate: null,
  getItem: function getItem(key, callback) {
    (0, _invariant["default"])(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiGet([key], function (errors, result) {
        var value = result && result[0] && result[0][1] ? result[0][1] : null;
        var errs = convertErrors(errors);
        callback && callback(errs && errs[0], value);
        if (errs) {
          reject(errs[0]);
        } else {
          resolve(value);
        }
      });
    });
  },
  setItem: function setItem(key, value, callback) {
    (0, _invariant["default"])(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiSet([[key, value]], function (errors) {
        var errs = convertErrors(errors);
        callback && callback(errs && errs[0]);
        if (errs) {
          reject(errs[0]);
        } else {
          resolve();
        }
      });
    });
  },
  removeItem: function removeItem(key, callback) {
    (0, _invariant["default"])(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiRemove([key], function (errors) {
        var errs = convertErrors(errors);
        callback && callback(errs && errs[0]);
        if (errs) {
          reject(errs[0]);
        } else {
          resolve();
        }
      });
    });
  },
  mergeItem: function mergeItem(key, value, callback) {
    (0, _invariant["default"])(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiMerge([[key, value]], function (errors) {
        var errs = convertErrors(errors);
        callback && callback(errs && errs[0]);
        if (errs) {
          reject(errs[0]);
        } else {
          resolve();
        }
      });
    });
  },
  clear: function clear(callback) {
    (0, _invariant["default"])(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.clear(function (error) {
        callback && callback(convertError(error));
        if (error && convertError(error)) {
          reject(convertError(error));
        } else {
          resolve();
        }
      });
    });
  },
  getAllKeys: function getAllKeys(callback) {
    (0, _invariant["default"])(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.getAllKeys(function (error, keys) {
        callback && callback(convertError(error), keys);
        if (error) {
          reject(convertError(error));
        } else {
          resolve(keys);
        }
      });
    });
  },
  flushGetRequests: function flushGetRequests() {
    var getRequests = this._getRequests;
    var getKeys = this._getKeys;
    this._getRequests = [];
    this._getKeys = [];
    (0, _invariant["default"])(RCTAsyncStorage, 'RCTAsyncStorage not available');
    RCTAsyncStorage.multiGet(getKeys, function (errors, result) {
      var map = {};
      result && result.forEach(function (_ref) {
        var _ref2 = (0, _slicedToArray2["default"])(_ref, 2),
          key = _ref2[0],
          value = _ref2[1];
        map[key] = value;
        return value;
      });
      var reqLength = getRequests.length;
      for (var i = 0; i < reqLength; i++) {
        var request = getRequests[i];
        var requestKeys = request.keys;
        var requestResult = requestKeys.map(function (key) {
          return [key, map[key]];
        });
        request.callback && request.callback(null, requestResult);
        request.resolve && request.resolve(requestResult);
      }
    });
  },
  multiGet: function multiGet(keys, callback) {
    var _this = this;
    if (!this._immediate) {
      this._immediate = setImmediate(function () {
        _this._immediate = null;
        _this.flushGetRequests();
      });
    }
    return new Promise(function (resolve, reject) {
      _this._getRequests.push({
        keys: keys,
        callback: callback,
        keyIndex: _this._getKeys.length,
        resolve: resolve,
        reject: reject
      });
      keys.forEach(function (key) {
        if (_this._getKeys.indexOf(key) === -1) {
          _this._getKeys.push(key);
        }
      });
    });
  },
  multiSet: function multiSet(keyValuePairs, callback) {
    (0, _invariant["default"])(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiSet(keyValuePairs, function (errors) {
        var error = convertErrors(errors);
        callback && callback(error);
        if (error) {
          reject(error);
        } else {
          resolve();
        }
      });
    });
  },
  multiRemove: function multiRemove(keys, callback) {
    (0, _invariant["default"])(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiRemove(keys, function (errors) {
        var error = convertErrors(errors);
        callback && callback(error);
        if (error) {
          reject(error);
        } else {
          resolve();
        }
      });
    });
  },
  multiMerge: function multiMerge(keyValuePairs, callback) {
    (0, _invariant["default"])(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiMerge(keyValuePairs, function (errors) {
        var error = convertErrors(errors);
        callback && callback(error);
        if (error) {
          reject(error);
        } else {
          resolve();
        }
      });
    });
  }
};
if (RCTAsyncStorage && !RCTAsyncStorage.multiMerge) {
  delete AsyncStorage.mergeItem;
  delete AsyncStorage.multiMerge;
}
function convertErrors(errs) {
  if (!errs) {
    return null;
  }
  return (Array.isArray(errs) ? errs : [errs]).map(function (e) {
    return convertError(e);
  });
}
function convertError(error) {
  if (!error) {
    return null;
  }
  var out = new Error(error.message);
  out.key = error.key;
  return out;
}
module.exports = AsyncStorage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSQ1RBc3luY1N0b3JhZ2UiLCJOYXRpdmVBc3luY1NRTGl0ZURCU3RvcmFnZSIsIk5hdGl2ZUFzeW5jTG9jYWxTdG9yYWdlIiwiQXN5bmNTdG9yYWdlIiwiX2dldFJlcXVlc3RzIiwiX2dldEtleXMiLCJfaW1tZWRpYXRlIiwiZ2V0SXRlbSIsImtleSIsImNhbGxiYWNrIiwiaW52YXJpYW50IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJtdWx0aUdldCIsImVycm9ycyIsInJlc3VsdCIsInZhbHVlIiwiZXJycyIsImNvbnZlcnRFcnJvcnMiLCJzZXRJdGVtIiwibXVsdGlTZXQiLCJyZW1vdmVJdGVtIiwibXVsdGlSZW1vdmUiLCJtZXJnZUl0ZW0iLCJtdWx0aU1lcmdlIiwiY2xlYXIiLCJlcnJvciIsImNvbnZlcnRFcnJvciIsImdldEFsbEtleXMiLCJrZXlzIiwiZmx1c2hHZXRSZXF1ZXN0cyIsImdldFJlcXVlc3RzIiwiZ2V0S2V5cyIsIm1hcCIsImZvckVhY2giLCJyZXFMZW5ndGgiLCJsZW5ndGgiLCJpIiwicmVxdWVzdCIsInJlcXVlc3RLZXlzIiwicmVxdWVzdFJlc3VsdCIsInNldEltbWVkaWF0ZSIsInB1c2giLCJrZXlJbmRleCIsImluZGV4T2YiLCJrZXlWYWx1ZVBhaXJzIiwiQXJyYXkiLCJpc0FycmF5IiwiZSIsIm91dCIsIkVycm9yIiwibWVzc2FnZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJBc3luY1N0b3JhZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93IHN0cmljdFxuICogQGpzZG9jXG4gKi9cblxuaW1wb3J0IE5hdGl2ZUFzeW5jTG9jYWxTdG9yYWdlIGZyb20gJy4vTmF0aXZlQXN5bmNMb2NhbFN0b3JhZ2UnO1xuaW1wb3J0IE5hdGl2ZUFzeW5jU1FMaXRlREJTdG9yYWdlIGZyb20gJy4vTmF0aXZlQXN5bmNTUUxpdGVEQlN0b3JhZ2UnO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuXG4vLyBVc2UgU1FMaXRlIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZpbGUgc3RvcmFnZS5cbmNvbnN0IFJDVEFzeW5jU3RvcmFnZSA9IE5hdGl2ZUFzeW5jU1FMaXRlREJTdG9yYWdlIHx8IE5hdGl2ZUFzeW5jTG9jYWxTdG9yYWdlO1xuXG50eXBlIEdldFJlcXVlc3QgPSB7XG4gIGtleXM6IEFycmF5PHN0cmluZz4sXG4gIGNhbGxiYWNrOiA/KGVycm9yczogP0FycmF5PEVycm9yPiwgcmVzdWx0OiA/QXJyYXk8QXJyYXk8c3RyaW5nPj4pID0+IHZvaWQsXG4gIGtleUluZGV4OiBudW1iZXIsXG4gIHJlc29sdmU6IChcbiAgICByZXN1bHQ/OlxuICAgICAgfCB2b2lkXG4gICAgICB8IG51bGxcbiAgICAgIHwgUHJvbWlzZTw/QXJyYXk8QXJyYXk8c3RyaW5nPj4+XG4gICAgICB8IEFycmF5PEFycmF5PHN0cmluZz4+LFxuICApID0+IHZvaWQsXG4gIHJlamVjdDogKGVycm9yPzogbWl4ZWQpID0+IHZvaWQsXG59O1xuXG4vKipcbiAqIGBBc3luY1N0b3JhZ2VgIGlzIGEgc2ltcGxlLCB1bmVuY3J5cHRlZCwgYXN5bmNocm9ub3VzLCBwZXJzaXN0ZW50LCBrZXktdmFsdWVcbiAqIHN0b3JhZ2Ugc3lzdGVtIHRoYXQgaXMgZ2xvYmFsIHRvIHRoZSBhcHAuICBJdCBzaG91bGQgYmUgdXNlZCBpbnN0ZWFkIG9mXG4gKiBMb2NhbFN0b3JhZ2UuXG4gKlxuICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXN5bmNzdG9yYWdlXG4gKi9cbmNvbnN0IEFzeW5jU3RvcmFnZSA9IHtcbiAgX2dldFJlcXVlc3RzOiAoW106IEFycmF5PEdldFJlcXVlc3Q+KSxcbiAgX2dldEtleXM6IChbXTogQXJyYXk8c3RyaW5nPiksXG4gIF9pbW1lZGlhdGU6IChudWxsOiA/bnVtYmVyKSxcblxuICAvKipcbiAgICogRmV0Y2hlcyBhbiBpdGVtIGZvciBhIGBrZXlgIGFuZCBpbnZva2VzIGEgY2FsbGJhY2sgdXBvbiBjb21wbGV0aW9uLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hc3luY3N0b3JhZ2UjZ2V0aXRlbVxuICAgKi9cbiAgZ2V0SXRlbTogZnVuY3Rpb24gKFxuICAgIGtleTogc3RyaW5nLFxuICAgIGNhbGxiYWNrPzogPyhlcnJvcjogP0Vycm9yLCByZXN1bHQ6ID9zdHJpbmcpID0+IHZvaWQsXG4gICk6IFByb21pc2U8P3N0cmluZz4ge1xuICAgIGludmFyaWFudChSQ1RBc3luY1N0b3JhZ2UsICdSQ1RBc3luY1N0b3JhZ2Ugbm90IGF2YWlsYWJsZScpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBSQ1RBc3luY1N0b3JhZ2UubXVsdGlHZXQoW2tleV0sIGZ1bmN0aW9uIChlcnJvcnMsIHJlc3VsdCkge1xuICAgICAgICAvLyBVbnBhY2sgcmVzdWx0IHRvIGdldCB2YWx1ZSBmcm9tIFtba2V5LHZhbHVlXV1cbiAgICAgICAgY29uc3QgdmFsdWUgPSByZXN1bHQgJiYgcmVzdWx0WzBdICYmIHJlc3VsdFswXVsxXSA/IHJlc3VsdFswXVsxXSA6IG51bGw7XG4gICAgICAgIGNvbnN0IGVycnMgPSBjb252ZXJ0RXJyb3JzKGVycm9ycyk7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGVycnMgJiYgZXJyc1swXSwgdmFsdWUpO1xuICAgICAgICBpZiAoZXJycykge1xuICAgICAgICAgIHJlamVjdChlcnJzWzBdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIGZvciBhIGBrZXlgIGFuZCBpbnZva2VzIGEgY2FsbGJhY2sgdXBvbiBjb21wbGV0aW9uLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hc3luY3N0b3JhZ2Ujc2V0aXRlbVxuICAgKi9cbiAgc2V0SXRlbTogZnVuY3Rpb24gKFxuICAgIGtleTogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY2FsbGJhY2s/OiA/KGVycm9yOiA/RXJyb3IpID0+IHZvaWQsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGludmFyaWFudChSQ1RBc3luY1N0b3JhZ2UsICdSQ1RBc3luY1N0b3JhZ2Ugbm90IGF2YWlsYWJsZScpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBSQ1RBc3luY1N0b3JhZ2UubXVsdGlTZXQoW1trZXksIHZhbHVlXV0sIGZ1bmN0aW9uIChlcnJvcnMpIHtcbiAgICAgICAgY29uc3QgZXJycyA9IGNvbnZlcnRFcnJvcnMoZXJyb3JzKTtcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soZXJycyAmJiBlcnJzWzBdKTtcbiAgICAgICAgaWYgKGVycnMpIHtcbiAgICAgICAgICByZWplY3QoZXJyc1swXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlcyBhbiBpdGVtIGZvciBhIGBrZXlgIGFuZCBpbnZva2VzIGEgY2FsbGJhY2sgdXBvbiBjb21wbGV0aW9uLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hc3luY3N0b3JhZ2UjcmVtb3ZlaXRlbVxuICAgKi9cbiAgcmVtb3ZlSXRlbTogZnVuY3Rpb24gKFxuICAgIGtleTogc3RyaW5nLFxuICAgIGNhbGxiYWNrPzogPyhlcnJvcjogP0Vycm9yKSA9PiB2b2lkLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpbnZhcmlhbnQoUkNUQXN5bmNTdG9yYWdlLCAnUkNUQXN5bmNTdG9yYWdlIG5vdCBhdmFpbGFibGUnKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgUkNUQXN5bmNTdG9yYWdlLm11bHRpUmVtb3ZlKFtrZXldLCBmdW5jdGlvbiAoZXJyb3JzKSB7XG4gICAgICAgIGNvbnN0IGVycnMgPSBjb252ZXJ0RXJyb3JzKGVycm9ycyk7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGVycnMgJiYgZXJyc1swXSk7XG4gICAgICAgIGlmIChlcnJzKSB7XG4gICAgICAgICAgcmVqZWN0KGVycnNbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1lcmdlcyBhbiBleGlzdGluZyBga2V5YCB2YWx1ZSB3aXRoIGFuIGlucHV0IHZhbHVlLCBhc3N1bWluZyBib3RoIHZhbHVlc1xuICAgKiBhcmUgc3RyaW5naWZpZWQgSlNPTi5cbiAgICpcbiAgICogKipOT1RFOioqIFRoaXMgaXMgbm90IHN1cHBvcnRlZCBieSBhbGwgbmF0aXZlIGltcGxlbWVudGF0aW9ucy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXN5bmNzdG9yYWdlI21lcmdlaXRlbVxuICAgKi9cbiAgbWVyZ2VJdGVtOiBmdW5jdGlvbiAoXG4gICAga2V5OiBzdHJpbmcsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjYWxsYmFjaz86ID8oZXJyb3I6ID9FcnJvcikgPT4gdm9pZCxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaW52YXJpYW50KFJDVEFzeW5jU3RvcmFnZSwgJ1JDVEFzeW5jU3RvcmFnZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIFJDVEFzeW5jU3RvcmFnZS5tdWx0aU1lcmdlKFtba2V5LCB2YWx1ZV1dLCBmdW5jdGlvbiAoZXJyb3JzKSB7XG4gICAgICAgIGNvbnN0IGVycnMgPSBjb252ZXJ0RXJyb3JzKGVycm9ycyk7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGVycnMgJiYgZXJyc1swXSk7XG4gICAgICAgIGlmIChlcnJzKSB7XG4gICAgICAgICAgcmVqZWN0KGVycnNbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVyYXNlcyAqYWxsKiBgQXN5bmNTdG9yYWdlYCBmb3IgYWxsIGNsaWVudHMsIGxpYnJhcmllcywgZXRjLiBZb3UgcHJvYmFibHlcbiAgICogZG9uJ3Qgd2FudCB0byBjYWxsIHRoaXM7IHVzZSBgcmVtb3ZlSXRlbWAgb3IgYG11bHRpUmVtb3ZlYCB0byBjbGVhciBvbmx5XG4gICAqIHlvdXIgYXBwJ3Mga2V5cy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXN5bmNzdG9yYWdlI2NsZWFyXG4gICAqL1xuICBjbGVhcjogZnVuY3Rpb24gKGNhbGxiYWNrPzogPyhlcnJvcjogP0Vycm9yKSA9PiB2b2lkKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaW52YXJpYW50KFJDVEFzeW5jU3RvcmFnZSwgJ1JDVEFzeW5jU3RvcmFnZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIFJDVEFzeW5jU3RvcmFnZS5jbGVhcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soY29udmVydEVycm9yKGVycm9yKSk7XG4gICAgICAgIGlmIChlcnJvciAmJiBjb252ZXJ0RXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgcmVqZWN0KGNvbnZlcnRFcnJvcihlcnJvcikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldHMgKmFsbCoga2V5cyBrbm93biB0byB5b3VyIGFwcDsgZm9yIGFsbCBjYWxsZXJzLCBsaWJyYXJpZXMsIGV0Yy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXN5bmNzdG9yYWdlI2dldGFsbGtleXNcbiAgICovXG4gIGdldEFsbEtleXM6IGZ1bmN0aW9uIChcbiAgICBjYWxsYmFjaz86ID8oZXJyb3I6ID9FcnJvciwga2V5czogP0FycmF5PHN0cmluZz4pID0+IHZvaWQsXG4gICk6IFByb21pc2U8P0FycmF5PHN0cmluZz4+IHtcbiAgICBpbnZhcmlhbnQoUkNUQXN5bmNTdG9yYWdlLCAnUkNUQXN5bmNTdG9yYWdlIG5vdCBhdmFpbGFibGUnKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgUkNUQXN5bmNTdG9yYWdlLmdldEFsbEtleXMoZnVuY3Rpb24gKGVycm9yLCBrZXlzKSB7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGNvbnZlcnRFcnJvcihlcnJvciksIGtleXMpO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICByZWplY3QoY29udmVydEVycm9yKGVycm9yKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShrZXlzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZSBmb2xsb3dpbmcgYmF0Y2hlZCBmdW5jdGlvbnMgYXJlIHVzZWZ1bCBmb3IgZXhlY3V0aW5nIGEgbG90IG9mXG4gICAqIG9wZXJhdGlvbnMgYXQgb25jZSwgYWxsb3dpbmcgZm9yIG5hdGl2ZSBvcHRpbWl6YXRpb25zIGFuZCBwcm92aWRlIHRoZVxuICAgKiBjb252ZW5pZW5jZSBvZiBhIHNpbmdsZSBjYWxsYmFjayBhZnRlciBhbGwgb3BlcmF0aW9ucyBhcmUgY29tcGxldGUuXG4gICAqXG4gICAqIFRoZXNlIGZ1bmN0aW9ucyByZXR1cm4gYXJyYXlzIG9mIGVycm9ycywgcG90ZW50aWFsbHkgb25lIGZvciBldmVyeSBrZXkuXG4gICAqIEZvciBrZXktc3BlY2lmaWMgZXJyb3JzLCB0aGUgRXJyb3Igb2JqZWN0IHdpbGwgaGF2ZSBhIGtleSBwcm9wZXJ0eSB0b1xuICAgKiBpbmRpY2F0ZSB3aGljaCBrZXkgY2F1c2VkIHRoZSBlcnJvci5cbiAgICovXG5cbiAgLyoqXG4gICAqIEZsdXNoZXMgYW55IHBlbmRpbmcgcmVxdWVzdHMgdXNpbmcgYSBzaW5nbGUgYmF0Y2ggY2FsbCB0byBnZXQgdGhlIGRhdGEuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FzeW5jc3RvcmFnZSNmbHVzaGdldHJlcXVlc3RzXG4gICAqICovXG4gIC8qICRGbG93Rml4TWVbbWlzc2luZy10aGlzLWFubm90XSBUaGUgJ3RoaXMnIHR5cGUgYW5ub3RhdGlvbihzKSByZXF1aXJlZCBieVxuICAgKiBGbG93J3MgTFRJIHVwZGF0ZSBjb3VsZCBub3QgYmUgYWRkZWQgdmlhIGNvZGVtb2QgKi9cbiAgZmx1c2hHZXRSZXF1ZXN0czogZnVuY3Rpb24gKCk6IHZvaWQge1xuICAgIGNvbnN0IGdldFJlcXVlc3RzID0gdGhpcy5fZ2V0UmVxdWVzdHM7XG4gICAgY29uc3QgZ2V0S2V5cyA9IHRoaXMuX2dldEtleXM7XG5cbiAgICB0aGlzLl9nZXRSZXF1ZXN0cyA9IFtdO1xuICAgIHRoaXMuX2dldEtleXMgPSBbXTtcblxuICAgIGludmFyaWFudChSQ1RBc3luY1N0b3JhZ2UsICdSQ1RBc3luY1N0b3JhZ2Ugbm90IGF2YWlsYWJsZScpO1xuICAgIFJDVEFzeW5jU3RvcmFnZS5tdWx0aUdldChnZXRLZXlzLCBmdW5jdGlvbiAoZXJyb3JzLCByZXN1bHQpIHtcbiAgICAgIC8vIEV2ZW4gdGhvdWdoIHRoZSBydW50aW1lIGNvbXBsZXhpdHkgb2YgdGhpcyBpcyB0aGVvcmV0aWNhbGx5IHdvcnNlIHZzIGlmIHdlIHVzZWQgYSBtYXAsXG4gICAgICAvLyBpdCdzIG11Y2gsIG11Y2ggZmFzdGVyIGluIHByYWN0aWNlIGZvciB0aGUgZGF0YSBzZXRzIHdlIGRlYWwgd2l0aCAod2UgYXZvaWRcbiAgICAgIC8vIGFsbG9jYXRpbmcgcmVzdWx0IHBhaXIgYXJyYXlzKS4gVGhpcyB3YXMgaGVhdmlseSBiZW5jaG1hcmtlZC5cbiAgICAgIC8vXG4gICAgICAvLyBJcyB0aGVyZSBhIHdheSB0byBhdm9pZCB1c2luZyB0aGUgbWFwIGJ1dCBmaXggdGhlIGJ1ZyBpbiB0aGlzIGJyZWFraW5nIHRlc3Q/XG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL2NvbW1pdC84ZGQ4YWQ3NjU3OWQ3ZmVlZjM0YzAxNGQzODdiZjAyMDY1NjkyMjY0XG4gICAgICBjb25zdCBtYXA6IHtbc3RyaW5nXTogc3RyaW5nfSA9IHt9O1xuICAgICAgcmVzdWx0ICYmXG4gICAgICAgIHJlc3VsdC5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICBtYXBba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICBjb25zdCByZXFMZW5ndGggPSBnZXRSZXF1ZXN0cy5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcUxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRSZXF1ZXN0c1tpXTtcbiAgICAgICAgY29uc3QgcmVxdWVzdEtleXMgPSByZXF1ZXN0LmtleXM7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RSZXN1bHQgPSByZXF1ZXN0S2V5cy5tYXAoa2V5ID0+IFtrZXksIG1hcFtrZXldXSk7XG4gICAgICAgIHJlcXVlc3QuY2FsbGJhY2sgJiYgcmVxdWVzdC5jYWxsYmFjayhudWxsLCByZXF1ZXN0UmVzdWx0KTtcbiAgICAgICAgcmVxdWVzdC5yZXNvbHZlICYmIHJlcXVlc3QucmVzb2x2ZShyZXF1ZXN0UmVzdWx0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogVGhpcyBhbGxvd3MgeW91IHRvIGJhdGNoIHRoZSBmZXRjaGluZyBvZiBpdGVtcyBnaXZlbiBhbiBhcnJheSBvZiBga2V5YFxuICAgKiBpbnB1dHMuIFlvdXIgY2FsbGJhY2sgd2lsbCBiZSBpbnZva2VkIHdpdGggYW4gYXJyYXkgb2YgY29ycmVzcG9uZGluZ1xuICAgKiBrZXktdmFsdWUgcGFpcnMgZm91bmQuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FzeW5jc3RvcmFnZSNtdWx0aWdldFxuICAgKi9cbiAgLyogJEZsb3dGaXhNZVttaXNzaW5nLXRoaXMtYW5ub3RdIFRoZSAndGhpcycgdHlwZSBhbm5vdGF0aW9uKHMpIHJlcXVpcmVkIGJ5XG4gICAqIEZsb3cncyBMVEkgdXBkYXRlIGNvdWxkIG5vdCBiZSBhZGRlZCB2aWEgY29kZW1vZCAqL1xuICBtdWx0aUdldDogZnVuY3Rpb24gKFxuICAgIGtleXM6IEFycmF5PHN0cmluZz4sXG4gICAgY2FsbGJhY2s/OiA/KGVycm9yczogP0FycmF5PEVycm9yPiwgcmVzdWx0OiA/QXJyYXk8QXJyYXk8c3RyaW5nPj4pID0+IHZvaWQsXG4gICk6IFByb21pc2U8P0FycmF5PEFycmF5PHN0cmluZz4+PiB7XG4gICAgaWYgKCF0aGlzLl9pbW1lZGlhdGUpIHtcbiAgICAgIHRoaXMuX2ltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuX2ltbWVkaWF0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZmx1c2hHZXRSZXF1ZXN0cygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPD9BcnJheTxBcnJheTxzdHJpbmc+Pj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5fZ2V0UmVxdWVzdHMucHVzaCh7XG4gICAgICAgIGtleXMsXG4gICAgICAgIGNhbGxiYWNrLFxuICAgICAgICAvLyBkbyB3ZSBuZWVkIHRoaXM/XG4gICAgICAgIGtleUluZGV4OiB0aGlzLl9nZXRLZXlzLmxlbmd0aCxcbiAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0LFxuICAgICAgfSk7XG4gICAgICAvLyBhdm9pZCBmZXRjaGluZyBkdXBsaWNhdGVzXG4gICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2dldEtleXMuaW5kZXhPZihrZXkpID09PSAtMSkge1xuICAgICAgICAgIHRoaXMuX2dldEtleXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogVXNlIHRoaXMgYXMgYSBiYXRjaCBvcGVyYXRpb24gZm9yIHN0b3JpbmcgbXVsdGlwbGUga2V5LXZhbHVlIHBhaXJzLiBXaGVuXG4gICAqIHRoZSBvcGVyYXRpb24gY29tcGxldGVzIHlvdSdsbCBnZXQgYSBzaW5nbGUgY2FsbGJhY2sgd2l0aCBhbnkgZXJyb3JzLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hc3luY3N0b3JhZ2UjbXVsdGlzZXRcbiAgICovXG4gIG11bHRpU2V0OiBmdW5jdGlvbiAoXG4gICAga2V5VmFsdWVQYWlyczogQXJyYXk8QXJyYXk8c3RyaW5nPj4sXG4gICAgY2FsbGJhY2s/OiA/KGVycm9yczogP0FycmF5PEVycm9yPikgPT4gdm9pZCxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaW52YXJpYW50KFJDVEFzeW5jU3RvcmFnZSwgJ1JDVEFzeW5jU3RvcmFnZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIFJDVEFzeW5jU3RvcmFnZS5tdWx0aVNldChrZXlWYWx1ZVBhaXJzLCBmdW5jdGlvbiAoZXJyb3JzKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gY29udmVydEVycm9ycyhlcnJvcnMpO1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQ2FsbCB0aGlzIHRvIGJhdGNoIHRoZSBkZWxldGlvbiBvZiBhbGwga2V5cyBpbiB0aGUgYGtleXNgIGFycmF5LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hc3luY3N0b3JhZ2UjbXVsdGlyZW1vdmVcbiAgICovXG4gIG11bHRpUmVtb3ZlOiBmdW5jdGlvbiAoXG4gICAga2V5czogQXJyYXk8c3RyaW5nPixcbiAgICBjYWxsYmFjaz86ID8oZXJyb3JzOiA/QXJyYXk8RXJyb3I+KSA9PiB2b2lkLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpbnZhcmlhbnQoUkNUQXN5bmNTdG9yYWdlLCAnUkNUQXN5bmNTdG9yYWdlIG5vdCBhdmFpbGFibGUnKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgUkNUQXN5bmNTdG9yYWdlLm11bHRpUmVtb3ZlKGtleXMsIGZ1bmN0aW9uIChlcnJvcnMpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBjb252ZXJ0RXJyb3JzKGVycm9ycyk7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBCYXRjaCBvcGVyYXRpb24gdG8gbWVyZ2UgaW4gZXhpc3RpbmcgYW5kIG5ldyB2YWx1ZXMgZm9yIGEgZ2l2ZW4gc2V0IG9mXG4gICAqIGtleXMuIFRoaXMgYXNzdW1lcyB0aGF0IHRoZSB2YWx1ZXMgYXJlIHN0cmluZ2lmaWVkIEpTT04uXG4gICAqXG4gICAqICoqTk9URSoqOiBUaGlzIGlzIG5vdCBzdXBwb3J0ZWQgYnkgYWxsIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FzeW5jc3RvcmFnZSNtdWx0aW1lcmdlXG4gICAqL1xuICBtdWx0aU1lcmdlOiBmdW5jdGlvbiAoXG4gICAga2V5VmFsdWVQYWlyczogQXJyYXk8QXJyYXk8c3RyaW5nPj4sXG4gICAgY2FsbGJhY2s/OiA/KGVycm9yczogP0FycmF5PEVycm9yPikgPT4gdm9pZCxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaW52YXJpYW50KFJDVEFzeW5jU3RvcmFnZSwgJ1JDVEFzeW5jU3RvcmFnZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIFJDVEFzeW5jU3RvcmFnZS5tdWx0aU1lcmdlKGtleVZhbHVlUGFpcnMsIGZ1bmN0aW9uIChlcnJvcnMpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBjb252ZXJ0RXJyb3JzKGVycm9ycyk7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxufTtcblxuLy8gTm90IGFsbCBuYXRpdmUgaW1wbGVtZW50YXRpb25zIHN1cHBvcnQgbWVyZ2UuXG4vLyBUT0RPOiBDaGVjayB3aGV0aGVyIGFib3ZlIGNvbW1lbnQgaXMgY29ycmVjdC4gbXVsdGlNZXJnZSBpcyBndWFyYW50ZWVkIHRvXG4vLyBleGlzdCBpbiB0aGUgbW9kdWxlIHNwZWMgc28gd2Ugc2hvdWxkIGJlIGFibGUgdG8ganVzdCByZW1vdmUgdGhpcyBjaGVjay5cbmlmIChSQ1RBc3luY1N0b3JhZ2UgJiYgIVJDVEFzeW5jU3RvcmFnZS5tdWx0aU1lcmdlKSB7XG4gIC8vICRGbG93Rml4TWVbdW5jbGVhci10eXBlXVxuICBkZWxldGUgKEFzeW5jU3RvcmFnZTogYW55KS5tZXJnZUl0ZW07XG4gIC8vICRGbG93Rml4TWVbdW5jbGVhci10eXBlXVxuICBkZWxldGUgKEFzeW5jU3RvcmFnZTogYW55KS5tdWx0aU1lcmdlO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0RXJyb3JzKFxuICAvLyBOT1RFOiBUaGUgbmF0aXZlIG1vZHVsZSBzcGVjIG9ubHkgaGFzIHRoZSBBcnJheSBjYXNlLCBidXQgdGhlIEFuZHJvaWRcbiAgLy8gaW1wbGVtZW50YXRpb24gcGFzc2VzIGEgc2luZ2xlIG9iamVjdC5cbiAgZXJyczogPyhcbiAgICB8IHttZXNzYWdlOiBzdHJpbmcsIGtleT86IHN0cmluZ31cbiAgICB8IEFycmF5PHttZXNzYWdlOiBzdHJpbmcsIGtleT86IHN0cmluZ30+XG4gICksXG4pIHtcbiAgaWYgKCFlcnJzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIChBcnJheS5pc0FycmF5KGVycnMpID8gZXJycyA6IFtlcnJzXSkubWFwKGUgPT4gY29udmVydEVycm9yKGUpKTtcbn1cblxuZGVjbGFyZSBmdW5jdGlvbiBjb252ZXJ0RXJyb3Iodm9pZCB8IG51bGwpOiBudWxsO1xuZGVjbGFyZSBmdW5jdGlvbiBjb252ZXJ0RXJyb3Ioe21lc3NhZ2U6IHN0cmluZywga2V5Pzogc3RyaW5nfSk6IEVycm9yO1xuLyogJEZsb3dGaXhNZVttaXNzaW5nLWxvY2FsLWFubm90XSBUaGUgdHlwZSBhbm5vdGF0aW9uKHMpIHJlcXVpcmVkIGJ5IEZsb3cnc1xuICogTFRJIHVwZGF0ZSBjb3VsZCBub3QgYmUgYWRkZWQgdmlhIGNvZGVtb2QgKi9cbmZ1bmN0aW9uIGNvbnZlcnRFcnJvcihlcnJvcikge1xuICBpZiAoIWVycm9yKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3Qgb3V0ID0gbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAvLyAkRmxvd0ZpeE1lW3VuY2xlYXItdHlwZV1cbiAgKG91dDogYW55KS5rZXkgPSBlcnJvci5rZXk7XG4gIHJldHVybiBvdXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQXN5bmNTdG9yYWdlO1xuIl0sIm1hcHBpbmdzIjoiOzs7O0FBV0E7QUFDQTtBQUNBO0FBR0EsSUFBTUEsZUFBZSxHQUFHQyxzQ0FBMEIsSUFBSUMsbUNBQXVCO0FBdUI3RSxJQUFNQyxZQUFZLEdBQUc7RUFDbkJDLFlBQVksRUFBRyxFQUFzQjtFQUNyQ0MsUUFBUSxFQUFHLEVBQWtCO0VBQzdCQyxVQUFVLEVBQUcsSUFBYztFQU8zQkMsT0FBTyxFQUFFLGlCQUNQQyxHQUFXLEVBQ1hDLFFBQW9ELEVBQ2xDO0lBQ2xCLElBQUFDLHFCQUFTLEVBQUNWLGVBQWUsRUFBRSwrQkFBK0IsQ0FBQztJQUMzRCxPQUFPLElBQUlXLE9BQU8sQ0FBQyxVQUFDQyxPQUFPLEVBQUVDLE1BQU0sRUFBSztNQUN0Q2IsZUFBZSxDQUFDYyxRQUFRLENBQUMsQ0FBQ04sR0FBRyxDQUFDLEVBQUUsVUFBVU8sTUFBTSxFQUFFQyxNQUFNLEVBQUU7UUFFeEQsSUFBTUMsS0FBSyxHQUFHRCxNQUFNLElBQUlBLE1BQU0sQ0FBQyxD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