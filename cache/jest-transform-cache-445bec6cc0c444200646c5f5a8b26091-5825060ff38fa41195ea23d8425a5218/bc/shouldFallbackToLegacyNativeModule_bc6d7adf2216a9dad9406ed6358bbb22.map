{"version":3,"mappings":";;;;;;AAAA;AAEO,SAASA,kCAAT,GAAuD;EAAA;EAC5D,IAAMC,aAAa,4BACjBC,2BAAc,sBAAd,CADiB,oFACjBC,sBAAuCC,gBADtB,2DACjBC,uBAAyDC,iBAD3D;EAGA,IAAIL,aAAJ,EAAmB;IAMjB,IAAMM,kBAAkB,GACtBN,aAAa,CAACO,YAAd,IAA8B,CAACP,aAAa,CAACQ,oBAD/C;IAYA,IACEF,kBAAkB,IAClB,CAAC,aAAD,EAAgB,YAAhB,EAA8BG,QAA9B,CAAuCT,aAAa,CAACQ,oBAArD,CAFF,EAGE;MACA,OAAO,IAAP;IACD;EACF;EAED,OAAO,KAAP;AACD","names":["shouldFallbackToLegacyNativeModule","expoConstants","NativeModules","_NativeModules$Native","modulesConstants","_NativeModules$Native2","ExponentConstants","isLegacySdkVersion","appOwnership","executionEnvironment","includes"],"sources":["shouldFallbackToLegacyNativeModule.ts"],"sourcesContent":["import { NativeModules } from 'react-native';\n\nexport function shouldFallbackToLegacyNativeModule(): boolean {\n  const expoConstants =\n    NativeModules['NativeUnimoduleProxy']?.modulesConstants?.ExponentConstants;\n\n  if (expoConstants) {\n    /**\n     * In SDK <= 39, appOwnership is defined in managed apps but executionEnvironment is not.\n     * In bare React Native apps using expo-constants, appOwnership is never defined, so\n     * isLegacySdkVersion will be false in that context.\n     */\n    const isLegacySdkVersion =\n      expoConstants.appOwnership && !expoConstants.executionEnvironment;\n\n    /**\n     * Expo managed apps don't include the @react-native-async-storage/async-storage\n     * native modules yet, but the API interface is the same, so we can use the version\n     * exported from React Native still.\n     *\n     * If in future releases (eg: @react-native-async-storage/async-storage >= 2.0.0) this\n     * will likely not be valid anymore, and the package will need to be included in the Expo SDK\n     * to continue to work.\n     */\n    if (\n      isLegacySdkVersion ||\n      ['storeClient', 'standalone'].includes(expoConstants.executionEnvironment)\n    ) {\n      return true;\n    }\n  }\n\n  return false;\n}\n"]}